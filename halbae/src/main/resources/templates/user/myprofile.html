<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{/layout/header::headFrag('나의 프로필')}"></head>
<link rel="stylesheet" th:href="@{/css/header.css(ver=1.0)}">
<link rel="stylesheet" th:href="@{/css/user/myprofile.css(ver=1.0)}">
<script th:inline="javascript">
	$(function() {
		var userImgPath = /*[[${userDTO.userImgPath}]]*/ null;
		$('.userImg').attr("src", userImgPath);
	})
	
	function fnAskDelete() {
		if(confirm('계정을 삭제하시면 포인트와 쿠폰도 사라집니다. 삭제하시겠습니까?')) {
			$('#deleteUserFrm').submit();
		}
	}
	
</script>

<body>
	<div th:replace="~{/layout/header::gnbFrag}"></div>
	
	<div class="profileContainer">
		<div class="profileWrap">
			<div class="profileTitle">내 프로필</div>
			<div class="sectionLine"></div>
			
			<div class="profileImgArea">
					<img class="userImg" th:src="${userDTO.userImgPath}">
			</div>
			<form id="profileFrm" method="post" enctype="multipart/form-data" th:action="@{/user/updateProfile.do}">	
				<div class="profileBtn">
					<label for="newProfile" class="newProfile">
						프로필 변경
					</label>
					<input type="hidden" name="userId" th:value="${userDTO.userId}">
					<input type="file" id="newProfile" name="profile" onchange="fnProfile()">
				</div>
			</form>	
			<div class="sectionLine"></div>
				
			<div class="InfoArea">
				<div class="category">이메일(ID)</div>
				<div class="userId content" th:text="${userDTO.userId}"></div>
			</div>
			<div class="sectionLine"></div>
			
			<form method="post" th:action="@{/user/modifyPw.html}">
				<div class="InfoArea">
					<div class="category">비밀번호</div>
					<input type="hidden" name="userId" th:value="${userDTO.userId}">
					<button class="modifyPw">비밀번호 변경하기</button>
				</div>
			</form>
			<div class="sectionLine"></div>
		
			<div class="InfoArea">
				<div class="category">전화번호</div>
				<input class="content userTel" th:value="${userDTO.userTel}" readonly>
			</div>
			<div class="sectionLine"></div>
		
			<form method="post" th:action="@{/user/modifyName.do}">
				<div class="InfoArea">
					<div class="category">이름(별명)</div>
					<input class="content userName" name="userName" th:value="${userDTO.userName}">
					<input type="hidden" name="userId" th:value="${userDTO.userId}">
					<button class="modifyName">변경하기</button>
				</div>
			</form>
			<div class="sectionLine"></div>
			<div class="deleteWrap">
				<form id="deleteUserFrm" method="post" th:action="@{/user/deleteUser.do}">
					<input type="hidden" name="userId" th:value="${userDTO.userId}">
					<button type="button" class="deleteUser" onclick="fnAskDelete()">자기개발 포기하고 패배자로 살기</button>
				</form>
			</div>
		</div>
	</div>
</body>
</html>